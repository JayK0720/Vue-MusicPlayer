{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/slider/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/slider/index.vue","mtime":1570290342690},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {addClass} from '@/common/js/dom.js'\nimport BScroll from 'better-scroll'\nexport default{\n\tname:'slider',\n\tdata() {\n\t\treturn {\n\t\t\tdots:[],\n\t\t\tcurrentIndex:0,\n\t\t\tcount:0,\n\t\t}\n\t},\n\tprops:{\n\t\tautoplay:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:true\n\t\t},\n\t\tloop:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:true\n\t\t},\n\t\tinterval:{\n\t\t\ttype:Number,\n\t\t\tdefault:3000\n\t\t}\n\t},\n\tmounted(){\n\t\tthis.$nextTick(() => {\n\t\t\tthis._setSliderWidth();\n\t\t\tthis._initDots();\n\t\t\tthis._initSlider();\n\t\t\tif(this.autoplay){\n\t\t\t\tthis._autoPlay();\n\t\t\t}\n\t\t});\n\t\t// window.resize\n\t\twindow.addEventListener('resize',() => {\n\t\t\tthis._setSliderWidth(true);\n\t\t},false); \n\t},\n\tmethods:{\n\t\t_setSliderWidth(isResize){\n\t\t\tthis.sliderWidth = this.$refs.slider.offsetWidth;\n\t\t\t// parentNode.children是一个只读属性，返回一个node的子elements,是一个动态更新的htmlcollection.\n\t\t\tthis.children = this.$refs.sliderGroup.children;\n\t\t\tlet width = 0;  \n\t\t\tfor(let i = 0, len = this.children.length; i < len; i++){\n\t\t\t\tlet child = this.children[i];\n\t\t\t\taddClass(child,'slider-item');\t// 如果使用的时候没有添加'slider-item'类名，在slider组件里需要自动添加上\n\t\t\t\tchild.style.width = this.sliderWidth + 'px';\n\t\t\t\twidth += this.sliderWidth;\t\n\t\t\t}\n\t\t\tthis.count = this.children.length;\n\t\t\tif(this.loop && !isResize){\n\t\t\t\twidth += this.sliderWidth * 2;\n\t\t\t}\n\t\t\tthis.$refs.sliderGroup.style.width = width + 'px';\n\t\t},\n\t\t_initSlider(){\n\t\t\tthis.scroll = new BScroll(this.$refs.slider,{\n\t\t\t\tscrollX:true,\n\t\t\t\tscrollY:false,\n\t\t\t\tprobeType:1,\n\t\t\t\tsnap:{\n\t\t\t\t\tloop:this.loop,\n\t\t\t\t\tthreshold:0.3,\n\t\t\t\t\tspeed:400\n\t\t\t\t},\n\t\t\t\tclick:true,\n\t\t\t\tmomentum:false,\n\t\t\t});\n\t\t\tthis.scroll.on('scrollEnd',() => {\n\t\t\t\tlet pageIndex = this.scroll.getCurrentPage().pageX;\n\t\t\t\tthis.currentIndex = pageIndex;\n\t\t\t\tif(this.autoplay){\n\t\t\t\t\tclearTimeout(this.timer);\n\t\t\t\t\tthis._autoPlay();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t_autoPlay(){\n\t\t\tlet pageIndex = this.currentIndex + 1;\n\t\t\tif(pageIndex >= this.count) pageIndex = 0;\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.scroll.goToPage(pageIndex,0,400);\n\t\t\t},this.interval);\n\t\t},\n\t\t_initDots(){\n\t\t\tthis.dots = new Array(this.children.length);\n\t\t},\n\t}\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/base/slider","sourcesContent":["<template>\n\t<div class=\"slider\" ref='slider'>\n\t\t<div class=\"slider-group\" ref='sliderGroup'>\n\t\t\t<slot></slot>\n\t\t</div>\n\t\t<div class=\"dots\" >\n\t\t\t<span \n\t\t\t\tv-for='(item,index) in dots' \n\t\t\t\t:key='index'\n\t\t\t\t:class='{active:index === currentIndex}'\n\t\t\t></span>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {addClass} from '@/common/js/dom.js'\n\timport BScroll from 'better-scroll'\n\texport default{\n\t\tname:'slider',\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdots:[],\n\t\t\t\tcurrentIndex:0,\n\t\t\t\tcount:0,\n\t\t\t}\n\t\t},\n\t\tprops:{\n\t\t\tautoplay:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:true\n\t\t\t},\n\t\t\tloop:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:true\n\t\t\t},\n\t\t\tinterval:{\n\t\t\t\ttype:Number,\n\t\t\t\tdefault:3000\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis._setSliderWidth();\n\t\t\t\tthis._initDots();\n\t\t\t\tthis._initSlider();\n\t\t\t\tif(this.autoplay){\n\t\t\t\t\tthis._autoPlay();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// window.resize\n\t\t\twindow.addEventListener('resize',() => {\n\t\t\t\tthis._setSliderWidth(true);\n\t\t\t},false); \n\t\t},\n\t\tmethods:{\n\t\t\t_setSliderWidth(isResize){\n\t\t\t\tthis.sliderWidth = this.$refs.slider.offsetWidth;\n\t\t\t\t// parentNode.children是一个只读属性，返回一个node的子elements,是一个动态更新的htmlcollection.\n\t\t\t\tthis.children = this.$refs.sliderGroup.children;\n\t\t\t\tlet width = 0;  \n\t\t\t\tfor(let i = 0, len = this.children.length; i < len; i++){\n\t\t\t\t\tlet child = this.children[i];\n\t\t\t\t\taddClass(child,'slider-item');\t// 如果使用的时候没有添加'slider-item'类名，在slider组件里需要自动添加上\n\t\t\t\t\tchild.style.width = this.sliderWidth + 'px';\n\t\t\t\t\twidth += this.sliderWidth;\t\n\t\t\t\t}\n\t\t\t\tthis.count = this.children.length;\n\t\t\t\tif(this.loop && !isResize){\n\t\t\t\t\twidth += this.sliderWidth * 2;\n\t\t\t\t}\n\t\t\t\tthis.$refs.sliderGroup.style.width = width + 'px';\n\t\t\t},\n\t\t\t_initSlider(){\n\t\t\t\tthis.scroll = new BScroll(this.$refs.slider,{\n\t\t\t\t\tscrollX:true,\n\t\t\t\t\tscrollY:false,\n\t\t\t\t\tprobeType:1,\n\t\t\t\t\tsnap:{\n\t\t\t\t\t\tloop:this.loop,\n\t\t\t\t\t\tthreshold:0.3,\n\t\t\t\t\t\tspeed:400\n\t\t\t\t\t},\n\t\t\t\t\tclick:true,\n\t\t\t\t\tmomentum:false,\n\t\t\t\t});\n\t\t\t\tthis.scroll.on('scrollEnd',() => {\n\t\t\t\t\tlet pageIndex = this.scroll.getCurrentPage().pageX;\n\t\t\t\t\tthis.currentIndex = pageIndex;\n\t\t\t\t\tif(this.autoplay){\n\t\t\t\t\t\tclearTimeout(this.timer);\n\t\t\t\t\t\tthis._autoPlay();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t_autoPlay(){\n\t\t\t\tlet pageIndex = this.currentIndex + 1;\n\t\t\t\tif(pageIndex >= this.count) pageIndex = 0;\n\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\tthis.scroll.goToPage(pageIndex,0,400);\n\t\t\t\t},this.interval);\n\t\t\t},\n\t\t\t_initDots(){\n\t\t\t\tthis.dots = new Array(this.children.length);\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang='scss' scoped>\n\t.slider{\n\t\tposition:relative;\n\t\twidth:100%;\n\t\toverflow:hidden;\n\t\t.slider-item{\n\t\t\tfloat:left;\n\t\t\ta{\n\t\t\t\tdisplay:block;\n\t\t\t\theight:100%;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t\timg{\n\t\t\t\tdisplay:block;\n\t\t\t\theight:auto;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t}\n\t\t.dots{\n\t\t\twidth:100%;\n\t\t\tposition:absolute;\n\t\t\tbottom:10px;\n\t\t\theight:8px;\n\t\t\tfont-size:0;\n\t\t\ttext-align:center;\n\t\t\tz-index:10;\n\t\t\tspan{\n\t\t\t\tdisplay:inline-block;\n\t\t\t\tmargin:0 5px;\n\t\t\t\twidth:8px;\n\t\t\t\theight:8px;\n\t\t\t\tbackground-color:rgba(0,0,0,.3);\n\t\t\t\tborder-radius:50%;\n\t\t\t\t&.active{\n\t\t\t\t\tbackground-color:#fff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n"]}]}