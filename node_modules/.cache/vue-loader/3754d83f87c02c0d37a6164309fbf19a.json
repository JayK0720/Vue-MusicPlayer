{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/progress-bar/index.vue?vue&type=style&index=0&id=29a4cf2a&scoped=true&lang=scss&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/progress-bar/index.vue","mtime":1571758460389},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.progress-slider{\n\tposition:relative;\n\twidth:100%;\n\theight:100%;\n\tbackground-color:#fff;\n}\n.progress{\n\twidth:0;\n\theight:100%;\n\tbackground-color:#2ed296;\n}\n.slider-bar{\n\tposition:absolute;\n\tleft:0;\n\ttop:-5px;\n\twidth:12px;\n\theight:12px;\n\tborder-radius:50%;\n\tbackground-color:#fff;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/base/progress-bar","sourcesContent":["<template>\n\t<div class=\"progress-slider\" ref='slider'>\n\t\t<div class=\"progress\" ref='progress'></div>\n\t\t<div \n\t\t\tclass=\"slider-bar\" \n\t\t\tref='bar'\n\t\t\t@touchstart.prevent='handleTouchStart'\n\t\t\t@touchmove.prevent='handleTouchMove'\n\t\t\t@touchend.prevent='handleTouchEnd'\n\t\t></div>\n\t</div>\n</template>\n\n<script>\n\tconst barWidth = 12;\n\timport {prefixStyle} from '@/common/js/dom'\n\tconst transform = prefixStyle('transform');\n\texport default{\n\t\tname:'progress-bar',\n\t\tprops:{\n\t\t\tpercent:{\n\t\t\t\ttype:Number,\n\t\t\t\tdefault:0\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.touch = {}\n\t\t},\n\t\tmethods:{\n\t\t\t/*\n\t\t\t1. 拖动开始的时候先初始化, 圆点的初始位置，以及此时歌曲播放的进度 \n\t\t\t2. 拖动过程中实时获取拖动的数据, 减去初始的x坐标，再加上进度条的宽度，即为此时歌曲的播放进度\n\t\t\t*/\n\t\t\thandleTouchStart(e){\n\t\t\t\tthis.touch.startX = e.touches[0].pageX;\n\t\t\t\tthis.touch.progressWidth = this.$refs.progress.offsetWidth;\n\t\t\t\tthis.touch.initial = true;\n\t\t\t},\n\t\t\thandleTouchMove(e){\n\t\t\t\tif(!this.touch.initial) return;\n\t\t\t\tconst delta = e.touches[0].pageX - this.touch.startX;\n\t\t\t\t/*offsetWidth的最大宽度不能超过一个定值*/\n\t\t\t\tconst offsetWidth = Math.min( this.$refs.slider.offsetWidth - barWidth , this.touch.progressWidth+delta );\n\t\t\t\tthis._setProgress(offsetWidth);\n\t\t\t},\n\t\t\thandleTouchEnd(e){\n\t\t\t\tthis.touch.initial = false;\n\t\t\t\t\n\t\t\t\tconst totalWidth = this.$refs.slider.offsetWidth - barWidth; \n\t\t\t\tconst percent = this.$refs.progress.offsetWidth / totalWidth;\n\t\t\t\t\n\t\t\t\tthis.$emit('percentChange',percent);\n\t\t\t},\n\t\t\t_setProgress(offsetWidth){\n\t\t\t\tthis.$refs.progress.style.width = `${offsetWidth}px`;\n\t\t\t\tthis.$refs.bar.style.transform = `translate3d(${offsetWidth}px,0,0)`;\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tpercent(value) {\n\t\t\t\t// 在拖动的过程中,歌曲一直在播放，此时也会设置 进度条的宽度 和 bar的位置\n\t\t\t\tif(this.touch.initial) return;\n\t\t\t\tconst sliderWidth = this.$refs.slider.offsetWidth - barWidth;\n\t\t\t\tlet offsetWidth = sliderWidth * value;\n\t\t\t\tthis._setProgress(offsetWidth);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang='scss'>\n\t.progress-slider{\n\t\tposition:relative;\n\t\twidth:100%;\n\t\theight:100%;\n\t\tbackground-color:#fff;\n\t}\n\t.progress{\n\t\twidth:0;\n\t\theight:100%;\n\t\tbackground-color:#2ed296;\n\t}\n\t.slider-bar{\n\t\tposition:absolute;\n\t\tleft:0;\n\t\ttop:-5px;\n\t\twidth:12px;\n\t\theight:12px;\n\t\tborder-radius:50%;\n\t\tbackground-color:#fff;\n\t}\n</style>\n"]}]}