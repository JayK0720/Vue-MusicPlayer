{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/listview/index.vue?vue&type=style&index=0&id=1ef182bb&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/listview/index.vue","mtime":1570523799788},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.group-title,.fixed-title{\n\tpadding-left:16px;\n\theight:42px;\n\tline-height:42px;\n\tbackground-color:#f9f9f9;\n\tcolor:#898989;\n\tfont-size:12px;\n}\n.singer-list{\n\tpadding:0 16px;\n}\n.singer-item{\n\tdisplay:flex;\n\talign-items:center;\n\theight:60px;\n\tmargin-bottom:12px;\n\t&:last-child{\n\t\tmargin-bottom:0;\n\t}\n\t.avatar{\n\t\tmargin-right:10px;\n\t\twidth:60px;\n\t\theight:60px;\n\t\tdisplay:block;\n\t\tborder-radius:50%;\n\t}\n\t.name{\n\t\tfont-size:14px;\n\t\tcolor:#1a1a1a;\n\t}\n}\n.singer-index{\n\tposition:absolute;\n\ttop:50%;\n\ttransform:translateY(-50%);\n\tright:16px;\n\twidth:24px;\n\ttext-align:center;\n\tbackground-color:#fff;\n\tborder-radius:12px;\n\tz-index:100;\n\tli{\n\t\tline-height:20px;\n\t\tfont-size:10px;\n\t\tcolor:#8c8c8c;\n\t\t&.current{\n\t\t\tcolor:#22d59c;\n\t\t}\n\t}\n}\n.list-fixed{\n\tposition:absolute;\n\tleft:0;\n\ttop:0;\n\twidth:100%;\n\theight:43px;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/base/listview","sourcesContent":["<template>\n\t<Scroll \n\t\t:data='data' \n\t\tref='scroll'\n\t\t:listenScroll='listenScroll'\n\t\t:probeType='probeType'\n\t\t@scroll='handleScroll'\n\t>\n\t\t<ul class='group-list'>\n\t\t\t<li v-for='(group,index) in data' :key='index' ref='groupListItem'>\n\t\t\t\t<h2 class='group-title'>{{group.title}}</h2>\n\t\t\t\t<ul class='singer-list'>\n\t\t\t\t\t<li \n\t\t\t\t\t\tv-for='(item,index) in group.items' \n\t\t\t\t\t\t:key='index'\n\t\t\t\t\t\tclass='singer-item'\n\t\t\t\t\t\t@click='handleSelectSinger(item)'\n\t\t\t\t\t>\n\t\t\t\t\t\t<img v-bind:src=\"item.avatar\" v-bind:alt=\"item.name\" width='60' height='60' class='avatar'>\n\t\t\t\t\t\t<span class='name'>{{item.name}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div class=\"singer-index\" @touchmove.stop.prevent='handleTouchMove'>\n\t\t\t<ul class='index-list'>\n\t\t\t\t<li \n\t\t\t\t\tv-for='(item,index) in listIndex' \n\t\t\t\t\t:key='index'\n\t\t\t\t\t@touchstart='handleTouchIndex($event,index)'\n\t\t\t\t\tv-bind:class='{current:currentIndex === index}'\n\t\t\t\t\tclass='index-item'\n\t\t\t\t>{{item}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"list-fixed\" v-show='fixedTitle' ref='fixedTitle'>\n\t\t\t<h2 class=\"fixed-title\">{{fixedTitle}}</h2>\n\t\t</div>\n\t\t<Loading v-show='!data.length'/>\n\t</Scroll>\n</template>\n\n<script>\n\tconst INDEX_HEIGHT = 20;\n\tconst TITLE_HEIGHT = 42;\n\timport Scroll from '@/base/scroll'\n\timport Loading from '@/base/loading'\n\texport default{\n\t\tname:'listview',\n\t\tdata() {\n\t\t\treturn{\n\t\t\t\tlistenScroll:true,\n\t\t\t\tprobeType:3,\n\t\t\t\tcurrentIndex:0,\n\t\t\t\tscrollHeight:[],\n\t\t\t\tscrollY:-1,\n\t\t\t\tdiffY:0\n\t\t\t}\n\t\t},\n\t\tcomponents:{Scroll,Loading},\n\t\tprops:{\n\t\t\tdata:{\n\t\t\t\ttype:Array,\n\t\t\t\tdefault:function() {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\tlistIndex(){\n\t\t\t\treturn this.data.map((item) => {\n\t\t\t\t\treturn item.title.substring(0,1);\n\t\t\t\t}) \n\t\t\t},\n\t\t\tfixedTitle(){\n\t\t\t\tif(this.scrollY > 0){\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t\tif(this.scrollY < 0){\n\t\t\t\t\treturn this.data.length ? this.data[this.currentIndex].title : '';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.touch = {},\n\t\t\tthis.listHeight = []\n\t\t},\n\t\twatch:{\n\t\t\tdata(){\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis._calcHeight();\n\t\t\t\t})\n\t\t\t},\n\t\t\tdiffY(value){\n\t\t\t\tlet fixedTop = (value > 0 && value < TITLE_HEIGHT) ? TITLE_HEIGHT - value : 0;\n\t\t\t\tif(this.fixedTop === value) return;\n\t\t\t\tthis.$refs.fixedTitle.style.transform = `translate3d(0,${-fixedTop}px,0)`;\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\thandleTouchIndex(event,index){\n\t\t\t\tthis.touch.y1 = event.touches[0].pageY;\t// 第一次按下鼠标时的y值\n\t\t\t\tthis.touch.startIndex = index;\n\t\t\t\tthis._scrollToIndex(index);\n\t\t\t\tthis.currentIndex = index;\n\t\t\t},\n\t\t\thandleTouchMove(event){\n\t\t\t\tthis.touch.y2 = event.touches[0].pageY;\t// 在手指拖动时获取到的y轴的偏移量，两者的差值为拖动的距离\n\t\t\t\tconst delta = Math.round( (this.touch.y2 - this.touch.y1) / INDEX_HEIGHT);\n\t\t\t\tlet index = this.touch.startIndex + delta;\n\t\t\t\tthis.currentIndex = index;\n\t\t\t\tthis._scrollToIndex(index);\n\t\t\t},\n\t\t\thandleScroll({y}){\n\t\t\t\tthis.scrollY = y;\t// 当前滚动的高度\n\t\t\t\tif(y >= 0) {\n\t\t\t\t\tthis.currentIndex = 0; \n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst listHeight = this.listHeight;\n\t\t\t\tfor(let i = 0; i < listHeight.length - 1; i++){\n\t\t\t\t\tlet y1 = listHeight[i], y2 = listHeight[i+1];\n\t\t\t\t\tif( (-y >= y1) && (-y < y2) ){\n\t\t\t\t\t\tthis.currentIndex = i;\n\t\t\t\t\t\tthis.diffY = y2 + y;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(-y > listHeight[listHeight.length-1]){\n\t\t\t\t\tthis.currentHeight = listHeight.length - 1;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleSelectSinger(props){\n\t\t\t\tthis.$emit('select',props);\n\t\t\t},\n\t\t\t_scrollToIndex(index){\n\t\t\t\tconst groupListItem = this.$refs.groupListItem[index];\n\t\t\t\tthis.$refs.scroll.scrollToElement(groupListItem,0);\n\t\t\t},\n\t\t\t_calcHeight(){\n\t\t\t\tlet height = 0,listHeight = [],list = this.$refs.groupListItem;\n\t\t\t\tlistHeight.push(height);\n\t\t\t\tfor(let i = 0,len = list.length; i < len; i++){\n\t\t\t\t\theight += list[i].clientHeight;\n\t\t\t\t\tlistHeight.push(height);\n\t\t\t\t}\n\t\t\t\tthis.listHeight = listHeight;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang='scss' scoped>\n\t.group-title,.fixed-title{\n\t\tpadding-left:16px;\n\t\theight:42px;\n\t\tline-height:42px;\n\t\tbackground-color:#f9f9f9;\n\t\tcolor:#898989;\n\t\tfont-size:12px;\n\t}\n\t.singer-list{\n\t\tpadding:0 16px;\n\t}\n\t.singer-item{\n\t\tdisplay:flex;\n\t\talign-items:center;\n\t\theight:60px;\n\t\tmargin-bottom:12px;\n\t\t&:last-child{\n\t\t\tmargin-bottom:0;\n\t\t}\n\t\t.avatar{\n\t\t\tmargin-right:10px;\n\t\t\twidth:60px;\n\t\t\theight:60px;\n\t\t\tdisplay:block;\n\t\t\tborder-radius:50%;\n\t\t}\n\t\t.name{\n\t\t\tfont-size:14px;\n\t\t\tcolor:#1a1a1a;\n\t\t}\n\t}\n\t.singer-index{\n\t\tposition:absolute;\n\t\ttop:50%;\n\t\ttransform:translateY(-50%);\n\t\tright:16px;\n\t\twidth:24px;\n\t\ttext-align:center;\n\t\tbackground-color:#fff;\n\t\tborder-radius:12px;\n\t\tz-index:100;\n\t\tli{\n\t\t\tline-height:20px;\n\t\t\tfont-size:10px;\n\t\t\tcolor:#8c8c8c;\n\t\t\t&.current{\n\t\t\t\tcolor:#22d59c;\n\t\t\t}\n\t\t}\n\t}\n\t.list-fixed{\n\t\tposition:absolute;\n\t\tleft:0;\n\t\ttop:0;\n\t\twidth:100%;\n\t\theight:43px;\n\t}\n</style>\n"]}]}