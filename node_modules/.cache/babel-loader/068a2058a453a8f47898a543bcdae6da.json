{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js??ref--13-0!/Users/jinkang/Desktop/Vue-MusicPlayer/src/store/actions.js","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/store/actions.js","mtime":1572101957877},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport { playMode } from '@/common/js/config';\nimport { shuffle } from '@/common/js/util';\n/*\n1. 当播放歌曲后,切换模式为随机播放的时候,此时已经修改了playList为 打乱后的播放列表 \n2. 当点击播放列表的歌曲时,此时点击的歌曲 和 实际播放列表里的歌曲不一致,比如点击的是第二首歌,实际可能点击的歌曲在打乱后的列表里的序号为第10 个 或 20\n\n解决方法:\n找到当前点击的序号为index的歌曲 在打乱后列表里在第几项，然后实际播放打乱列表里 找到的这首歌曲。\n*/\n\nfunction findIndex(list, song) {\n  return list.findIndex(function (item) {\n    return item.songid === song.songid;\n  });\n}\n\nvar actions = {\n  selectPlay: function selectPlay(_ref, _ref2) {\n    var commit = _ref.commit,\n        state = _ref.state;\n    var list = _ref2.list,\n        index = _ref2.index,\n        song = _ref2.song;\n    commit('SET_SEQUENCE_LIST', list);\n\n    if (state.mode === playMode.random) {\n      var randomList = shuffle(list);\n      commit('SET_PLAY_LIST', randomList);\n      index = findIndex(randomList, list[index]);\n    } else {\n      commit('SET_PLAY_LIST', list);\n    }\n\n    commit('SET_PLAYING', true);\n    commit('SET_CURRENT_INDEX', index);\n  },\n\n  /*\n  点击按钮全部播放的时候,如果此时播放模式是随机播放,打款播放歌曲的顺序\n  */\n  playAllMusic: function playAllMusic(_ref3, _ref4) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    var list = _ref4.list,\n        index = _ref4.index;\n\n    if (state.mode === playMode.random) {\n      var randomList = shuffle(list);\n      commit('SET_PLAY_LIST', randomList);\n    } else {\n      commit('SET_PLAY_LIST', list);\n    }\n\n    commit('SET_PLAYING', true);\n    commit('SET_SEQUENCE_LIST', list);\n    commit('SET_CURRENT_INDEX', index);\n    commit('SET_FULL_SCREEN', true);\n  }\n};\nexport default actions;",{"version":3,"sources":["/Users/jinkang/Desktop/Vue-MusicPlayer/src/store/actions.js"],"names":["playMode","shuffle","findIndex","list","song","item","songid","actions","selectPlay","commit","state","index","mode","random","randomList","playAllMusic"],"mappings":";AAAA,SAAQA,QAAR,QAAuB,oBAAvB;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AAEA;;;;;;;;AAOA,SAASC,SAAT,CAAmBC,IAAnB,EAAwBC,IAAxB,EAA6B;AAC5B,SAAOD,IAAI,CAACD,SAAL,CAAe,UAACG,IAAD,EAAU;AAC/B,WAAOA,IAAI,CAACC,MAAL,KAAgBF,IAAI,CAACE,MAA5B;AACA,GAFM,CAAP;AAGA;;AAED,IAAMC,OAAO,GAAG;AACfC,EAAAA,UADe,mCAC6B;AAAA,QAAhCC,MAAgC,QAAhCA,MAAgC;AAAA,QAAzBC,KAAyB,QAAzBA,KAAyB;AAAA,QAAjBP,IAAiB,SAAjBA,IAAiB;AAAA,QAAZQ,KAAY,SAAZA,KAAY;AAAA,QAANP,IAAM,SAANA,IAAM;AAC3CK,IAAAA,MAAM,CAAC,mBAAD,EAAqBN,IAArB,CAAN;;AACA,QAAGO,KAAK,CAACE,IAAN,KAAeZ,QAAQ,CAACa,MAA3B,EAAkC;AACjC,UAAIC,UAAU,GAAGb,OAAO,CAACE,IAAD,CAAxB;AACAM,MAAAA,MAAM,CAAC,eAAD,EAAiBK,UAAjB,CAAN;AACAH,MAAAA,KAAK,GAAGT,SAAS,CAACY,UAAD,EAAYX,IAAI,CAACQ,KAAD,CAAhB,CAAjB;AACA,KAJD,MAIK;AACJF,MAAAA,MAAM,CAAC,eAAD,EAAiBN,IAAjB,CAAN;AACA;;AACDM,IAAAA,MAAM,CAAC,aAAD,EAAe,IAAf,CAAN;AACAA,IAAAA,MAAM,CAAC,mBAAD,EAAqBE,KAArB,CAAN;AACA,GAZc;;AAaf;;;AAGAI,EAAAA,YAhBe,sCAgB0B;AAAA,QAA3BN,MAA2B,SAA3BA,MAA2B;AAAA,QAApBC,KAAoB,SAApBA,KAAoB;AAAA,QAAZP,IAAY,SAAZA,IAAY;AAAA,QAAPQ,KAAO,SAAPA,KAAO;;AACxC,QAAGD,KAAK,CAACE,IAAN,KAAeZ,QAAQ,CAACa,MAA3B,EAAkC;AACjC,UAAIC,UAAU,GAAGb,OAAO,CAACE,IAAD,CAAxB;AACAM,MAAAA,MAAM,CAAC,eAAD,EAAiBK,UAAjB,CAAN;AACA,KAHD,MAGK;AACJL,MAAAA,MAAM,CAAC,eAAD,EAAiBN,IAAjB,CAAN;AACA;;AACDM,IAAAA,MAAM,CAAC,aAAD,EAAe,IAAf,CAAN;AACAA,IAAAA,MAAM,CAAC,mBAAD,EAAqBN,IAArB,CAAN;AACAM,IAAAA,MAAM,CAAC,mBAAD,EAAqBE,KAArB,CAAN;AACAF,IAAAA,MAAM,CAAC,iBAAD,EAAmB,IAAnB,CAAN;AACA;AA3Bc,CAAhB;AA6BA,eAAeF,OAAf","sourcesContent":["import {playMode} from '@/common/js/config'\nimport {shuffle} from '@/common/js/util'\n\n/*\n1. 当播放歌曲后,切换模式为随机播放的时候,此时已经修改了playList为 打乱后的播放列表 \n2. 当点击播放列表的歌曲时,此时点击的歌曲 和 实际播放列表里的歌曲不一致,比如点击的是第二首歌,实际可能点击的歌曲在打乱后的列表里的序号为第10 个 或 20\n\n解决方法:\n找到当前点击的序号为index的歌曲 在打乱后列表里在第几项，然后实际播放打乱列表里 找到的这首歌曲。\n*/\nfunction findIndex(list,song){\n\treturn list.findIndex((item) => {\n\t\treturn item.songid === song.songid;\n\t})\n}\n\nconst actions = {\n\tselectPlay({commit,state},{list,index,song}){\n\t\tcommit('SET_SEQUENCE_LIST',list);\n\t\tif(state.mode === playMode.random){\n\t\t\tlet randomList = shuffle(list);\n\t\t\tcommit('SET_PLAY_LIST',randomList);\n\t\t\tindex = findIndex(randomList,list[index]);\n\t\t}else{\n\t\t\tcommit('SET_PLAY_LIST',list);\n\t\t}\n\t\tcommit('SET_PLAYING',true);\n\t\tcommit('SET_CURRENT_INDEX',index);\n\t},\n\t/*\n\t点击按钮全部播放的时候,如果此时播放模式是随机播放,打款播放歌曲的顺序\n\t*/\n\tplayAllMusic({commit,state},{list,index}){\n\t\tif(state.mode === playMode.random){\n\t\t\tlet randomList = shuffle(list);\n\t\t\tcommit('SET_PLAY_LIST',randomList);\n\t\t}else{\n\t\t\tcommit('SET_PLAY_LIST',list);\n\t\t}\n\t\tcommit('SET_PLAYING',true);\n\t\tcommit('SET_SEQUENCE_LIST',list);\n\t\tcommit('SET_CURRENT_INDEX',index);\n\t\tcommit('SET_FULL_SCREEN',true);\n\t}\n} \nexport default actions;"]}]}