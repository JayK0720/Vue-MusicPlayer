{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/components/player/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/components/player/index.vue","mtime":1571466080983},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n  name: 'player',\n  data: function data() {\n    return {\n      flag: false\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['fullScreen', 'playList', 'currentSong', 'playing', 'currentIndex']), {\n    cdClass: function cdClass() {\n      return this.playing ? 'play' : 'pause';\n    }\n  }),\n  methods: _objectSpread({}, mapMutations({\n    foldFullScreen: 'SET_FULL_SCREEN',\n    setPlayingState: 'SET_PLAYING',\n    setCurrentIndex: 'SET_CURRENT_INDEX'\n  }), {\n    handleFold: function handleFold() {\n      this.foldFullScreen(false);\n    },\n    handleTogglePlaying: function handleTogglePlaying() {\n      if (!this.flag) return; // playing 是getters里获取到的playing 状态, 点击播放按钮切换播放状态\n\n      this.setPlayingState(!this.playing);\n    },\n    handlePrev: function handlePrev() {\n      // 点击播放上一首\n      if (!this.flag) return;\n      var index = this.currentIndex - 1;\n\n      if (index === -1) {\n        index = this.playList.length - 1;\n      }\n\n      this.setCurrentIndex(index);\n      this.setPlayingState(true);\n      this.flag = false;\n    },\n    handleNext: function handleNext() {\n      if (!this.flag) return; // 点击播放下一首,当index改变的时候,currentSong就会修改\n\n      var index = this.currentIndex + 1;\n\n      if (index === this.playList.length) {\n        index = 0;\n      }\n\n      this.setCurrentIndex(index);\n      this.setPlayingState(true);\n      this.flag = false;\n    },\n    ready: function ready() {\n      this.flag = true;\n    },\n    error: function error() {\n      console.log('报错了');\n      this.flag = true;\n    }\n  }),\n  watch: {\n    currentSong: function currentSong() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.$refs.audio.play();\n      });\n    },\n    playing: function playing(state) {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        var audio = _this2.$refs.audio;\n        state ? audio.play() : audio.pause();\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA,SAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,YADA,EAEA,UAFA,EAGA,aAHA,EAIA,SAJA,EAKA,cALA,CAAA,CADA;AAQA,IAAA,OARA,qBAQA;AACA,aAAA,KAAA,OAAA,GAAA,MAAA,GAAA,OAAA;AACA;AAVA,IAPA;AAmBA,EAAA,OAAA,oBACA,YAAA,CAAA;AACA,IAAA,cAAA,EAAA,iBADA;AAEA,IAAA,eAAA,EAAA,aAFA;AAGA,IAAA,eAAA,EAAA;AAHA,GAAA,CADA;AAMA,IAAA,UANA,wBAMA;AACA,WAAA,cAAA,CAAA,KAAA;AACA,KARA;AASA,IAAA,mBATA,iCASA;AACA,UAAA,CAAA,KAAA,IAAA,EAAA,OADA,CAEA;;AACA,WAAA,eAAA,CAAA,CAAA,KAAA,OAAA;AACA,KAbA;AAcA,IAAA,UAdA,wBAcA;AACA;AACA,UAAA,CAAA,KAAA,IAAA,EAAA;AACA,UAAA,KAAA,GAAA,KAAA,YAAA,GAAA,CAAA;;AACA,UAAA,KAAA,KAAA,CAAA,CAAA,EAAA;AACA,QAAA,KAAA,GAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA;AACA;;AACA,WAAA,eAAA,CAAA,KAAA;AACA,WAAA,eAAA,CAAA,IAAA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KAxBA;AAyBA,IAAA,UAzBA,wBAyBA;AACA,UAAA,CAAA,KAAA,IAAA,EAAA,OADA,CAEA;;AACA,UAAA,KAAA,GAAA,KAAA,YAAA,GAAA,CAAA;;AACA,UAAA,KAAA,KAAA,KAAA,QAAA,CAAA,MAAA,EAAA;AACA,QAAA,KAAA,GAAA,CAAA;AACA;;AACA,WAAA,eAAA,CAAA,KAAA;AACA,WAAA,eAAA,CAAA,IAAA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KAnCA;AAoCA,IAAA,KApCA,mBAoCA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KAtCA;AAuCA,IAAA,KAvCA,mBAuCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA;AA1CA,IAnBA;AA+DA,EAAA,KAAA,EAAA;AACA,IAAA,WADA,yBACA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,OANA,mBAMA,KANA,EAMA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,YAAA,KAAA,GAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,QAAA,KAAA,GAAA,KAAA,CAAA,IAAA,EAAA,GAAA,KAAA,CAAA,KAAA,EAAA;AACA,OAHA;AAIA;AAXA;AA/DA,CAAA","sourcesContent":["<template>\n\t<div class=\"player\" v-show='playList.length > 0'>\n\t\t<transition name='slide'>\n\t\t\t<div class=\"full-screen-player\" v-show='fullScreen'>\n\t\t\t\t<div class=\"player-background\">\n\t\t\t\t\t<img v-bind:src=\"currentSong.image\" alt=\"\" width='100%' height='100%'>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"top\">\n\t\t\t\t\t<div class=\"arrow-down\" @touchstart.stop='handleFold'>\n\t\t\t\t\t\t<i class=\"iconfont\">&#xe721;</i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h1 class=\"song-name\">{{currentSong.songname}}</h1>\n\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t<i class=\"iconfont\">&#xe610;</i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"middle\">\n\t\t\t\t\t<div class=\"middle-left\">\n\t\t\t\t\t\t<div class=\"singer-name\">\n\t\t\t\t\t\t\t<p class='text'>{{currentSong.singer}}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"cd-wrapper\">\n\t\t\t\t\t\t\t<div class=\"cd\" :class='cdClass'>\n\t\t\t\t\t\t\t\t<img v-lazy=\"currentSong.image\" :alt=\"currentSong.songname\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"middle-right\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bottom\">\n\t\t\t\t\t<div class=\"progress-wrap\">\n\t\t\t\t\t\t<span class=\"current\">01:58</span>\n\t\t\t\t\t\t<div class=\"progress-bar\"></div>\n\t\t\t\t\t\t<span class=\"total\">04:04</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"operator-wrap\">\n\t\t\t\t\t\t<div class=\"mode\">\n\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe612;</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"prev\" @click='handlePrev'>\n\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe602;</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"play\" @click='handleTogglePlaying'>\n\t\t\t\t\t\t\t<template v-if='!playing'>\n\t\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe652;</i>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe603;</i>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"next\" @click='handleNext'>\n\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe619;</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"collect\">\n\t\t\t\t\t\t\t<i class=\"iconfont\">&#xe61a;</i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t\t<!-- <Audio :url='currentSong.url' ref='audio'/> -->\n\t\t<audio \n\t\t\tv-bind:src=\"currentSong.url\" \n\t\t\tref='audio'\n\t\t\t@canplay='ready'\n\t\t\t@error='error'\n\t\t></audio>\n\t</div>\n</template>\n\n<script>\n\timport {mapGetters,mapMutations} from 'vuex'\n\texport default{\n\t\tname:'player',\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tflag:false\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapGetters([\n\t\t\t\t\t'fullScreen',\n\t\t\t\t\t'playList',\n\t\t\t\t\t'currentSong',\n\t\t\t\t\t'playing',\n\t\t\t\t\t'currentIndex'\n\t\t\t\t]),\n\t\t\tcdClass(){\n\t\t\t\treturn this.playing? 'play' : 'pause'\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t...mapMutations({\n\t\t\t\tfoldFullScreen:'SET_FULL_SCREEN',\n\t\t\t\tsetPlayingState:'SET_PLAYING',\n\t\t\t\tsetCurrentIndex:'SET_CURRENT_INDEX'\n\t\t\t}),\n\t\t\thandleFold(){\n\t\t\t\tthis.foldFullScreen(false);\n\t\t\t},\n\t\t\thandleTogglePlaying(){\n\t\t\t\tif(!this.flag) return;\n\t\t\t\t// playing 是getters里获取到的playing 状态, 点击播放按钮切换播放状态\n\t\t\t\tthis.setPlayingState(!this.playing);\n\t\t\t},\n\t\t\thandlePrev(){\n\t\t\t\t// 点击播放上一首\n\t\t\t\tif(!this.flag) return;\n\t\t\t\tlet index = this.currentIndex - 1;\n\t\t\t\tif(index === -1){\n\t\t\t\t\tindex = this.playList.length - 1;\n\t\t\t\t}\n\t\t\t\tthis.setCurrentIndex(index);\n\t\t\t\tthis.setPlayingState(true);\n\t\t\t\tthis.flag = false;\n\t\t\t},\n\t\t\thandleNext(){\n\t\t\t\tif(!this.flag) return;\n\t\t\t\t// 点击播放下一首,当index改变的时候,currentSong就会修改\n\t\t\t\tlet index = this.currentIndex + 1;\n\t\t\t\tif(index === this.playList.length){\n\t\t\t\t\tindex = 0;\n\t\t\t\t}\n\t\t\t\tthis.setCurrentIndex(index);\n\t\t\t\tthis.setPlayingState(true);\n\t\t\t\tthis.flag = false;\n\t\t\t},\n\t\t\tready(){\n\t\t\t\tthis.flag = true;\n\t\t\t},\n\t\t\terror(){\n\t\t\t\tconsole.log('报错了');\n\t\t\t\tthis.flag = true;\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tcurrentSong(){\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.audio.play();\n\t\t\t\t}) \n\t\t\t},\n\t\t\tplaying(state){\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tconst audio = this.$refs.audio;\n\t\t\t\t\tstate ? audio.play() : audio.pause();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang='scss' scoped>\n\t@import '@/common/scss/mixin.scss';\n\t.full-screen-player{\n\t\tposition:fixed;\n\t\tleft:0;\n\t\tbottom:0;\n\t\ttop:0;\n\t\tright:0;\n\t\tz-index:200;\n\t\tbackground-color:#232323;\n\t\tcolor:#ffffff;\n\t\t.player-background{\n\t\t\tposition:absolute;\n\t\t\tleft:0;\n\t\t\ttop:0;\n\t\t\twidth:100%;\n\t\t\theight:100%;\n\t\t\topacity:0.4;\n\t\t\tz-index:-1;\n\t\t\tfilter:blur(25px);\n\t\t}\n\t\t.top{\n\t\t\tmargin-top:30px;\n\t\t\tdisplay:flex;\n\t\t\tpadding:0 16px;\n\t\t\theight:20px;\n\t\t\tjustify-content:space-between;\n\t\t\talign-items:center;\n\t\t\t.arrow-down{\n\t\t\t\ttransform:rotateZ(-90deg);\n\t\t\t}\n\t\t\t.arrow-down,.menu{\n\t\t\t\tflex:0 0 20px;\n\t\t\t\t.iconfont{\n\t\t\t\t\tfont-size:20px;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.song-name{\n\t\t\t\ttext-align:center;\n\t\t\t}\n\t\t\t.song-name{\n\t\t\t\tflex:0 0 1;\n\t\t\t\theight:20px;\n\t\t\t\tline-height:20px;\n\t\t\t\tfont-size:18px;\n\t\t\t\t@include text-ellipsis;\n\t\t\t}\n\t\t}\n\t\t.middle{\n\t\t\tposition:fixed;\n\t\t\ttop:55px;\n\t\t\tbottom:135px;\n\t\t\twidth:100%;\n\t\t\t.singer-name{\n\t\t\t\tdisplay:flex;\n\t\t\t\tpadding:0 10px;\n\t\t\t\theight:44px;\n\t\t\t\tfont-size:14px;\n\t\t\t\tjustify-content:center;\n\t\t\t\talign-items:center;\n\t\t\t\tflex:1;\n\t\t\t\t.text{\n\t\t\t\t\tpadding:0 8px;\n\t\t\t\t\t@include text-ellipsis;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.singer-name:before,.singer-name:after{\n\t\t\t\tcontent:'';\n\t\t\t\tdisplay:block;\n\t\t\t\tflex:0 0 18px;\n\t\t\t\twidth:18px;\n\t\t\t\theight:1px;\n\t\t\t\tbackground-color:#ffffff;\n\t\t\t}\n\t\t\t.middle-left{\n\t\t\t\tposition:relative;\n\t\t\t\theight:100%;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t\t.cd-wrapper{\n\t\t\t\tposition:absolute;\n\t\t\t\ttop:50%;\n\t\t\t\tleft:50%;\n\t\t\t\ttransform:translate(-50%,-50%);\n\t\t\t\twidth:86%;\n\t\t\t\theight:0;\n\t\t\t\tpadding-top:86%;\n\t\t\t\tborder-radius:50%;\n\t\t\t\tborder:8px solid rgba(0,0,0,.3);\n\t\t\t\t.cd{\n\t\t\t\t\tposition:absolute;\n\t\t\t\t\tleft:0;\n\t\t\t\t\ttop:0;\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight:100%;\n\t\t\t\t\timg{\n\t\t\t\t\t\tdisplay:block;\n\t\t\t\t\t\twidth:100%;\n\t\t\t\t\t\theight:100%;\n\t\t\t\t\t\tborder-radius:50%;\n\t\t\t\t\t}\n\t\t\t\t\t&.play{\n\t\t\t\t\t\tanimation:rotate 20s linear infinite;\n\t\t\t\t\t\tanimation-play-state:run;\n\t\t\t\t\t}\n\t\t\t\t\t&.pause{\n\t\t\t\t\t\tanimation:rotate 20s linear infinite;\n\t\t\t\t\t\tanimation-play-state:paused;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.bottom{\n\t\t\tposition:absolute;\n\t\t\tbottom:30px;\n\t\t\twidth:100%;\n\t\t\t.progress-wrap{\n\t\t\t\tdisplay:flex;\n\t\t\t\theight:45px;\n\t\t\t\tline-height:45px;\n\t\t\t\talign-items:center;\n\t\t\t\t.total,.current{\n\t\t\t\t\tpadding:0 10px;\n\t\t\t\t\tcolor:#fff;\n\t\t\t\t\tfont-size:12px;\n\t\t\t\t}\n\t\t\t\t.progress-bar{\n\t\t\t\t\tflex:1;\n\t\t\t\t\theight:2px;\n\t\t\t\t\tbackground-color:#ffffff;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.operator-wrap{\n\t\t\t\tdisplay:flex;\n\t\t\t\theight:54px;\n\t\t\t\tcolor:#fff;\n\t\t\t\talign-items:center;\n\t\t\t\tjustify-content:space-around;\n\t\t\t\t.mode,.collect{\n\t\t\t\t\t.iconfont{\n\t\t\t\t\t\tfont-size:24px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.play{\n\t\t\t\t\t.iconfont{\n\t\t\t\t\t\tfont-size:40px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.prev,.next{\n\t\t\t\t\t.iconfont{\n\t\t\t\t\t\tfont-size:30px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.slide-enter-active,.slide-leave-active{\n\t\ttransition:all .3s;\n\t}\n\t.slide-enter,.slide-leave-to{\n\t\ttransform:translate3d(0,100%,0);\n\t}\n\t/*图片旋转动画*/\n\t@keyframes rotate{\n\t\t0%{\n\t\t\ttransform:rotateZ(0deg);\n\t\t}\n\t\t100%{\n\t\t\ttransform:rotateZ(360deg);\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/components/player"}]}