{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js??ref--13-0!/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/cache.js","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/cache.js","mtime":1573972134308},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nvar MAX_SEARCH_LENGTH = 10;\nvar MAX_PLAY_LENGTH = 100;\nvar PLAY_KEY = '_play_';\nvar SEARCH_KEY = '_search_';\nexport function savePlayHistory(song) {\n  var playHistory = JSON.parse(window.localStorage.getItem(PLAY_KEY) || \"[]\");\n  var index = playHistory.findIndex(function (item) {\n    return item.songmid === song.songmid;\n  });\n  if (index === 0) return;\n\n  if (index > 0) {\n    playHistory.splice(index, 1);\n  }\n\n  playHistory.unshift(song);\n\n  if (playHistory.length > MAX_PLAY_LENGTH) {\n    playHistory.pop();\n  }\n\n  window.localStorage.setItem(PLAY_KEY, JSON.stringify(playHistory));\n  return playHistory;\n}\nexport function loadPlayHistory() {\n  var playHistory = JSON.parse(window.localStorage.getItem(PLAY_KEY) || '[]');\n  return playHistory;\n}\nexport function clearPlayHistory() {\n  window.localStorage.removeItem(PLAY_KEY);\n  return [];\n}\n\nfunction insertArray(array, value, compare, maxLen) {\n  var index = array.findIndex(compare);\n  if (index === 0) return;\n\n  if (index > 0) {\n    array.splice(index, 1);\n  }\n\n  array.unshift(value);\n\n  if (maxLen && array.length > maxLen) {\n    array.pop();\n  }\n}\n\nexport function saveSearchHistory(query) {\n  var searchHistory = JSON.parse(window.localStorage.getItem(SEARCH_KEY) || '[]');\n  insertArray(searchHistory, query, function (item) {\n    return item === query;\n  }, MAX_SEARCH_LENGTH);\n  window.localStorage.setItem(SEARCH_KEY, JSON.stringify(searchHistory));\n  return searchHistory;\n}\nexport function loadSearchHistory() {\n  var searchHistory = JSON.parse(window.localStorage.getItem(SEARCH_KEY) || '[]');\n  return searchHistory;\n}\nexport function clearSearchHistory() {\n  window.localStorage.removeItem(SEARCH_KEY);\n  return [];\n}",{"version":3,"sources":["/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/cache.js"],"names":["MAX_SEARCH_LENGTH","MAX_PLAY_LENGTH","PLAY_KEY","SEARCH_KEY","savePlayHistory","song","playHistory","JSON","parse","window","localStorage","getItem","index","findIndex","item","songmid","splice","unshift","length","pop","setItem","stringify","loadPlayHistory","clearPlayHistory","removeItem","insertArray","array","value","compare","maxLen","saveSearchHistory","query","searchHistory","loadSearchHistory","clearSearchHistory"],"mappings":"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","sourcesContent":["const MAX_SEARCH_LENGTH = 10;\nconst MAX_PLAY_LENGTH = 100;\nconst PLAY_KEY = '_play_';\nconst SEARCH_KEY = '_search_';\n\nexport function savePlayHistory(song){\n\tlet playHistory = JSON.parse(window.localStorage.getItem(PLAY_KEY) || \"[]\");\n\tvar index = playHistory.findIndex((item) => {\n\t\treturn item.songmid === song.songmid;\n\t});\n\tif(index === 0) return;\n\tif(index > 0){\n\t\tplayHistory.splice(index,1);\n\t}\n\tplayHistory.unshift(song);\n\tif(playHistory.length > MAX_PLAY_LENGTH){\n\t\tplayHistory.pop();\n\t}\n\twindow.localStorage.setItem(PLAY_KEY,JSON.stringify(playHistory));\n\treturn playHistory;\n}\n\nexport function loadPlayHistory(){\n\tlet playHistory = JSON.parse(window.localStorage.getItem(PLAY_KEY) || '[]');\n\treturn playHistory;\n}\n\nexport function clearPlayHistory(){\n\twindow.localStorage.removeItem(PLAY_KEY);\n\treturn [];\n}\n\n\nfunction insertArray(array,value,compare,maxLen){\n\tconst index = array.findIndex(compare);\n\tif(index === 0) return;\n\tif(index > 0){\n\t\tarray.splice(index,1);\n\t}\n\tarray.unshift(value);\n\tif(maxLen && array.length > maxLen){\n\t\tarray.pop();\n\t}\n}\n\n\nexport function saveSearchHistory(query){\n\tlet searchHistory = JSON.parse(window.localStorage.getItem(SEARCH_KEY) || '[]');\n\tinsertArray(searchHistory,query,(item) => {\n\t\treturn item === query\n\t},MAX_SEARCH_LENGTH);\n\twindow.localStorage.setItem(SEARCH_KEY,JSON.stringify(searchHistory));\n\treturn searchHistory;\n}\n\nexport function loadSearchHistory(){\n\tlet searchHistory = JSON.parse(window.localStorage.getItem(SEARCH_KEY) || '[]');\n\treturn searchHistory;\n}\n\nexport function clearSearchHistory(){\n\twindow.localStorage.removeItem(SEARCH_KEY);\n\treturn [];\n}"]}]}