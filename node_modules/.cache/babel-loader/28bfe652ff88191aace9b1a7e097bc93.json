{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js??ref--13-0!/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/song.js","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/song.js","mtime":1572159846351},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport { getLyric as _getLyric } from '@/common/api/lyric';\nimport { ERR_OK } from '@/common/api/config';\nimport { Base64 } from 'js-base64';\n\nvar Song =\n/*#__PURE__*/\nfunction () {\n  function Song(_ref) {\n    var songid = _ref.songid,\n        songmid = _ref.songmid,\n        singer = _ref.singer,\n        songname = _ref.songname,\n        albumname = _ref.albumname,\n        duration = _ref.duration,\n        url = _ref.url,\n        image = _ref.image;\n\n    _classCallCheck(this, Song);\n\n    this.songid = songid;\n    this.songmid = songmid;\n    this.singer = singer;\n    this.songname = songname;\n    this.albumname = albumname;\n    this.duration = duration;\n    this.url = url;\n    this.image = image;\n  }\n\n  _createClass(Song, [{\n    key: \"getLyric\",\n    value: function getLyric() {\n      var _this = this;\n\n      if (this.lyric) {\n        return Promise.resolve(this.lyric);\n      } else {\n        return new Promise(function (resolve, reject) {\n          _getLyric(_this.songmid).then(function (res) {\n            if (res.retcode === ERR_OK) {\n              _this.lyric = Base64.decode(res.lyric);\n              resolve(_this.lyric);\n            } else {\n              reject('no lyric');\n            }\n          });\n        });\n      }\n    }\n  }]);\n\n  return Song;\n}();\n\nexport function createSong(musicData) {\n  return new Song({\n    songid: musicData.songid,\n    songmid: musicData.songmid,\n    songname: musicData.songname,\n    albumname: musicData.albumname,\n    duration: musicData.interval,\n    singer: formatSinger(musicData.singer),\n    image: \"https://y.gtimg.cn/music/photo_new/T002R300x300M000\".concat(musicData.albummid, \".jpg?max_age=2592000\"),\n    url: musicData.url\n  });\n}\n\nfunction formatSinger(singer) {\n  var ret = [];\n  if (!singer.length) return '';\n  singer.forEach(function (item) {\n    ret.push(item.name);\n  });\n  return ret.join('/');\n}",{"version":3,"sources":["/Users/jinkang/Desktop/Vue-MusicPlayer/src/common/js/song.js"],"names":["getLyric","ERR_OK","Base64","Song","songid","songmid","singer","songname","albumname","duration","url","image","lyric","Promise","resolve","reject","then","res","retcode","decode","createSong","musicData","interval","formatSinger","albummid","ret","length","forEach","item","push","name","join"],"mappings":";;;;AAAA,SAAQA,QAAQ,IAARA,SAAR,QAAuB,oBAAvB;AACA,SAAQC,MAAR,QAAqB,qBAArB;AACA,SAAQC,MAAR,QAAqB,WAArB;;IACMC,I;;;AACL,sBAA0E;AAAA,QAA7DC,MAA6D,QAA7DA,MAA6D;AAAA,QAAtDC,OAAsD,QAAtDA,OAAsD;AAAA,QAA9CC,MAA8C,QAA9CA,MAA8C;AAAA,QAAvCC,QAAuC,QAAvCA,QAAuC;AAAA,QAA9BC,SAA8B,QAA9BA,SAA8B;AAAA,QAApBC,QAAoB,QAApBA,QAAoB;AAAA,QAAXC,GAAW,QAAXA,GAAW;AAAA,QAAPC,KAAO,QAAPA,KAAO;;AAAA;;AACzE,SAAKP,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA;;;;+BACS;AAAA;;AACT,UAAG,KAAKC,KAAR,EAAe;AACd,eAAOC,OAAO,CAACC,OAAR,CAAgB,KAAKF,KAArB,CAAP;AACA,OAFD,MAEK;AACJ,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAoB;AACtCf,UAAAA,SAAQ,CAAC,KAAI,CAACK,OAAN,CAAR,CAAuBW,IAAvB,CAA4B,UAAAC,GAAG,EAAI;AAClC,gBAAGA,GAAG,CAACC,OAAJ,KAAgBjB,MAAnB,EAA0B;AACzB,cAAA,KAAI,CAACW,KAAL,GAAaV,MAAM,CAACiB,MAAP,CAAcF,GAAG,CAACL,KAAlB,CAAb;AACAE,cAAAA,OAAO,CAAC,KAAI,CAACF,KAAN,CAAP;AACA,aAHD,MAGK;AACJG,cAAAA,MAAM,CAAC,UAAD,CAAN;AACA;AACD,WAPD;AAQA,SATM,CAAP;AAUA;AACD;;;;;;AAGF,OAAO,SAASK,UAAT,CAAoBC,SAApB,EAA8B;AACpC,SAAO,IAAIlB,IAAJ,CAAS;AACfC,IAAAA,MAAM,EAACiB,SAAS,CAACjB,MADF;AAEfC,IAAAA,OAAO,EAACgB,SAAS,CAAChB,OAFH;AAGfE,IAAAA,QAAQ,EAACc,SAAS,CAACd,QAHJ;AAIfC,IAAAA,SAAS,EAACa,SAAS,CAACb,SAJL;AAKfC,IAAAA,QAAQ,EAACY,SAAS,CAACC,QALJ;AAMfhB,IAAAA,MAAM,EAACiB,YAAY,CAACF,SAAS,CAACf,MAAX,CANJ;AAOfK,IAAAA,KAAK,+DAAuDU,SAAS,CAACG,QAAjE,yBAPU;AAQfd,IAAAA,GAAG,EAACW,SAAS,CAACX;AARC,GAAT,CAAP;AAUA;;AAED,SAASa,YAAT,CAAsBjB,MAAtB,EAA6B;AAC5B,MAAMmB,GAAG,GAAG,EAAZ;AACA,MAAG,CAACnB,MAAM,CAACoB,MAAX,EAAmB,OAAO,EAAP;AACnBpB,EAAAA,MAAM,CAACqB,OAAP,CAAe,UAACC,IAAD,EAAU;AACxBH,IAAAA,GAAG,CAACI,IAAJ,CAASD,IAAI,CAACE,IAAd;AACA,GAFD;AAGA,SAAOL,GAAG,CAACM,IAAJ,CAAS,GAAT,CAAP;AACA","sourcesContent":["import {getLyric} from '@/common/api/lyric'\nimport {ERR_OK} from '@/common/api/config'\nimport {Base64} from 'js-base64';\nclass Song {\n\tconstructor({songid,songmid,singer,songname,albumname,duration,url,image}){\n\t\tthis.songid = songid;\n\t\tthis.songmid = songmid;\n\t\tthis.singer = singer;\n\t\tthis.songname = songname;\n\t\tthis.albumname = albumname;\n\t\tthis.duration = duration;\n\t\tthis.url = url;\n\t\tthis.image = image;\n\t}\n\tgetLyric(){\n\t\tif(this.lyric) {\n\t\t\treturn Promise.resolve(this.lyric);\n\t\t}else{\n\t\t\treturn new Promise((resolve,reject) => {\n\t\t\t\tgetLyric(this.songmid).then(res => {\n\t\t\t\t\tif(res.retcode === ERR_OK){\n\t\t\t\t\t\tthis.lyric = Base64.decode(res.lyric);\n\t\t\t\t\t\tresolve(this.lyric);\n\t\t\t\t\t}else{\n\t\t\t\t\t\treject('no lyric');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport function createSong(musicData){\n\treturn new Song({\n\t\tsongid:musicData.songid,\n\t\tsongmid:musicData.songmid,\n\t\tsongname:musicData.songname,\n\t\talbumname:musicData.albumname,\n\t\tduration:musicData.interval,\n\t\tsinger:formatSinger(musicData.singer),\n\t\timage:`https://y.gtimg.cn/music/photo_new/T002R300x300M000${musicData.albummid}.jpg?max_age=2592000`,\n\t\turl:musicData.url\n\t})\n}\n\nfunction formatSinger(singer){\n\tconst ret = [];\n\tif(!singer.length) return '';\n\tsinger.forEach((item) => {\n\t\tret.push(item.name);\n\t});\n\treturn ret.join('/');\n}"]}]}