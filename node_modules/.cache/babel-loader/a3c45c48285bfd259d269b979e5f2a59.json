{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/components/add-song/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/components/add-song/index.vue","mtime":1574689881984},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchBox from '@/base/search-box';\nimport Suggest from '@/components/suggest';\nimport Switches from '@/base/switches';\nimport Scroll from '@/base/scroll';\nimport SongList from '@/base/song-list';\nimport { mapActions, mapGetters, mapMutations } from 'vuex';\nimport Tip from '@/base/tip';\nimport Confirm from '@/base/confirm';\nimport { createSong } from '@/common/js/song';\nexport default {\n  name: 'add-song',\n  data: function data() {\n    return {\n      flag: false,\n      placeholder: '搜索歌曲',\n      query: '',\n      switches: [{\n        name: '最近播放'\n      }, {\n        name: '搜索历史'\n      }],\n      currentIndex: 0,\n      text: '一首已添加到播放队列'\n    };\n  },\n  components: {\n    SearchBox: SearchBox,\n    Suggest: Suggest,\n    Switches: Switches,\n    SongList: SongList,\n    Scroll: Scroll,\n    Tip: Tip,\n    Confirm: Confirm\n  },\n  computed: _objectSpread({}, mapGetters(['playHistory', 'searchHistory'])),\n  methods: _objectSpread({}, mapActions(['insertSong', 'clearSearchHistory', 'addSong']), {}, mapMutations({\n    deleteSearchHistory: 'DELETE_SEARCH_HISTORY'\n  }), {\n    show: function show() {\n      this.flag = true;\n    },\n    hide: function hide() {\n      this.flag = false;\n    },\n    handleCloseAddSong: function handleCloseAddSong() {\n      this.hide();\n    },\n    handleSearch: function handleSearch(query) {\n      this.query = query;\n    },\n    switchItem: function switchItem(index) {\n      this.currentIndex = index;\n    },\n    selectSong: function selectSong(song, index) {\n      if (index !== 0) {\n        this.insertSong(song);\n      }\n    },\n    handleDeleteSearchItem: function handleDeleteSearchItem(index) {\n      if (this.searchHistory.length === 1) {\n        this.$refs.confirm.show();\n        return;\n      }\n\n      this.deleteSearchHistory(index);\n    },\n    handleConfirm: function handleConfirm() {\n      this.clearSearchHistory();\n    },\n    handleAddSong: function handleAddSong(song) {\n      var _this = this;\n\n      this.addSong(song);\n      this.$nextTick(function () {\n        _this.$refs.tip.show();\n      });\n    }\n  })\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,OAAA,SAAA,MAAA,mBAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,QAAA,MAAA,iBAAA;AACA,OAAA,MAAA,MAAA,eAAA;AACA,OAAA,QAAA,MAAA,kBAAA;AACA,SAAA,UAAA,EAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,GAAA,MAAA,YAAA;AACA,OAAA,OAAA,MAAA,gBAAA;AACA,SAAA,UAAA,QAAA,kBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,MAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,CAJA;AAQA,MAAA,YAAA,EAAA,CARA;AASA,MAAA,IAAA,EAAA;AATA,KAAA;AAWA,GAdA;AAeA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,QAAA,EAAA,QAHA;AAIA,IAAA,QAAA,EAAA,QAJA;AAKA,IAAA,MAAA,EAAA,MALA;AAMA,IAAA,GAAA,EAAA,GANA;AAOA,IAAA,OAAA,EAAA;AAPA,GAfA;AAwBA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,EAAA,eAAA,CAAA,CADA,CAxBA;AA2BA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,YAAA,EAAA,oBAAA,EAAA,SAAA,CAAA,CADA,MAEA,YAAA,CAAA;AACA,IAAA,mBAAA,EAAA;AADA,GAAA,CAFA;AAKA,IAAA,IALA,kBAKA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,KAPA;AAQA,IAAA,IARA,kBAQA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,KAVA;AAWA,IAAA,kBAXA,gCAWA;AACA,WAAA,IAAA;AACA,KAbA;AAcA,IAAA,YAdA,wBAcA,KAdA,EAcA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KAhBA;AAiBA,IAAA,UAjBA,sBAiBA,KAjBA,EAiBA;AACA,WAAA,YAAA,GAAA,KAAA;AACA,KAnBA;AAoBA,IAAA,UApBA,sBAoBA,IApBA,EAoBA,KApBA,EAoBA;AACA,UAAA,KAAA,KAAA,CAAA,EAAA;AACA,aAAA,UAAA,CAAA,IAAA;AACA;AACA,KAxBA;AAyBA,IAAA,sBAzBA,kCAyBA,KAzBA,EAyBA;AACA,UAAA,KAAA,aAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,CAAA,IAAA;AACA;AACA;;AACA,WAAA,mBAAA,CAAA,KAAA;AACA,KA/BA;AAgCA,IAAA,aAhCA,2BAgCA;AACA,WAAA,kBAAA;AACA,KAlCA;AAmCA,IAAA,aAnCA,yBAmCA,IAnCA,EAmCA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA;AACA,OAFA;AAGA;AAxCA;AA3BA,CAAA","sourcesContent":["<template>\n\t<transition name='slide'>\n\t\t<div class=\"add-song-wrapper\" v-show='flag'>\n\t\t\t<div class=\"header-wrapper\">\n\t\t\t\t<h1 class=\"title\">添加歌曲到列表</h1>\n\t\t\t\t<p \n\t\t\t\t\tclass='close-text'\n\t\t\t\t\t@click.stop='handleCloseAddSong'\n\t\t\t\t>关闭</p>\n\t\t\t</div>\n\t\t\t<SearchBox :placeholder=\"placeholder\" @query=\"handleSearch\"/>\n\t\t\t<Suggest\n\t\t\t\t:query=\"query\"\n\t\t\t\t:showSinger=\"false\" v-show=\"query\"\n\t\t\t\t:addSong=\"true\"\n\t\t\t\t@addSong=\"handleAddSong\"\n\t\t\t/>\n\t\t\t<div class=\"history-wrapper\" v-show=\"!query\">\n\t\t\t\t<Switches\n\t\t\t\t\t:switches=\"switches\"\n\t\t\t\t\t:currentIndex=\"currentIndex\"\n\t\t\t\t\t@switch=\"switchItem\"\n\t\t\t\t/>\n\t\t\t\t<Scroll\n\t\t\t\t\tv-if=\"currentIndex === 0\" :data=\"playHistory\"\n\t\t\t\t\tclass=\"play-history-wrapper\"\n\t\t\t\t\tref=\"playList\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"play-history-list\">\n\t\t\t\t\t\t<SongList\n\t\t\t\t\t\t\t@selectItem=\"selectSong\"\n\t\t\t\t\t\t\t:songs=\"playHistory\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Scroll>\n\t\t\t\t<Scroll\n\t\t\t\t\tv-if=\"currentIndex === 1\"\n\t\t\t\t\t:data=\"searchHistory\"\n\t\t\t\t\tclass=\"search-history-wrapper\"\n\t\t\t\t\tref=\"searchList\"\n\t\t\t\t>\n\t\t\t\t\t<ul class=\"search-history-list\">\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tv-for=\"(item,index) in searchHistory\"\n\t\t\t\t\t\t\tclass=\"search-item\"\n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t@click=\"handleDeleteSearchItem(index)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{{item}}</span>\n\t\t\t\t\t\t\t<i class=\"iconfont delete-icon\">&#xe607;</i>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</Scroll>\n\t\t\t</div>\n\t\t\t<Tip :delay=\"1500\" :text=\"text\" ref=\"tip\"/>\n\t\t\t<Confirm ref=\"confirm\" text=\"是否清空搜索历史\" @confirm=\"handleConfirm\"/>\n\t\t</div>\n\t</transition>\n</template>\n\n<script>\n\timport SearchBox from '@/base/search-box';\n\timport Suggest from '@/components/suggest'\n\timport Switches from '@/base/switches'\n\timport Scroll from '@/base/scroll'\n\timport SongList from '@/base/song-list'\n\timport {mapActions,mapGetters,mapMutations} from 'vuex'\n\timport Tip from '@/base/tip'\n\timport Confirm from '@/base/confirm'\n\timport {createSong} from '@/common/js/song'\n\texport default{\n\t\tname:'add-song',\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tflag:false,\n\t\t\t\tplaceholder:'搜索歌曲',\n\t\t\t\tquery:'',\n\t\t\t\tswitches:[\n\t\t\t\t\t{name:'最近播放'},\n\t\t\t\t\t{name:'搜索历史'}\n\t\t\t\t],\n\t\t\t\tcurrentIndex:0,\n\t\t\t\ttext:'一首已添加到播放队列'\n\t\t\t}\n\t\t},\n\t\tcomponents:{\n\t\t\tSearchBox,\n\t\t\tSuggest,\n\t\t\tSwitches,\n\t\t\tSongList,\n\t\t\tScroll,\n\t\t\tTip,\n\t\t\tConfirm\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapGetters(['playHistory','searchHistory'])\n\t\t},\n\t\tmethods:{\n\t\t\t...mapActions(['insertSong','clearSearchHistory','addSong']),\n\t\t\t...mapMutations({\n\t\t\t\tdeleteSearchHistory:'DELETE_SEARCH_HISTORY'\n\t\t\t}),\n\t\t\tshow(){\n\t\t\t\tthis.flag = true;\n\t\t\t},\n\t\t\thide(){\n\t\t\t\tthis.flag = false;\n\t\t\t},\n\t\t\thandleCloseAddSong(){\n\t\t\t\tthis.hide();\n\t\t\t},\n\t\t\thandleSearch(query){\n\t\t\t\tthis.query = query;\n\t\t\t},\n\t\t\tswitchItem(index){\n\t\t\t\tthis.currentIndex = index;\n\t\t\t},\n\t\t\tselectSong(song,index){\n\t\t\t\tif(index !== 0){\n\t\t\t\t\tthis.insertSong(song);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleDeleteSearchItem(index){\n\t\t\t\tif(this.searchHistory.length === 1){\n\t\t\t\t\tthis.$refs.confirm.show();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.deleteSearchHistory(index);\n\t\t\t},\n\t\t\thandleConfirm(){\n\t\t\t\tthis.clearSearchHistory();\n\t\t\t},\n\t\t\thandleAddSong(song){\n\t\t\t\tthis.addSong(song);\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.tip.show();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang='scss'>\n\t.add-song-wrapper{\n\t\tdisplay:flex;\n\t\tflex-direction:column;\n\t\tposition:fixed;\n\t\twidth:100%;\n\t\tleft:0;\n\t\ttop:0;\n\t\tbottom:0;\n\t\tbackground-color:#f1f1f1;\n\t}\n\t.slide-enter-active,.slide-leave-active{\n\t\ttransition:all .3s;\n\t}\n\t.slide-enter,.slide-leave-to{\n\t\ttransform:translate3d(100%,0,0);\n\t}\n\t.header-wrapper{\n\t\tposition:relative;\n\t\twidth:100%;\n\t\theight:40px;\n\t\tline-height:40px;\n\t\ttext-align:center;\n\t\tcolor:#212121;\n\t\t.close-text{\n\t\t\tposition:absolute;\n\t\t\tline-height:14px;\n\t\t\tfont-size:14px;\n\t\t\tright:10px;\n\t\t\ttop:13px;\n\t\t\tcolor:#333;\n\t\t}\n\t}\n\t.history-wrapper{\n\t\tpadding:0 16px;\n\t\tdisplay:flex;\n\t\tflex-direction:column;\n\t\tflex:1;\n\t\tmin-height:0;\n\t\tbackground-color:#f6f6f6;\n\t\t.play-history-wrapper,.search-history-wrapper{\n\t\t\theight:100%;\n\t\t\toverflow:auto;\n\t\t}\n\t\t.search-history-wrapper{\n\t\t\t.search-item{\n\t\t\t\tdisplay:flex;\n\t\t\t\tjustify-content:space-between;\n\t\t\t\tcolor:#212121;\n\t\t\t\tfont-size:14px;\n\t\t\t\theight:36px;\n\t\t\t\tline-height:36px;\n\t\t\t}\n\t\t\t.text{\n\t\t\t\tflex:1;\n\t\t\t\tmin-width:0;\n\t\t\t\twidth:100%;\n\t\t\t\twhite-space:nowrap;\n\t\t\t\ttext-overflow:ellipsis;\n\t\t\t\toverflow:hidden;\n\t\t\t}\n\t\t\t.delete-icon{\n\t\t\t\tflex:0 0 20px;\n\t\t\t\tfont-size:14px;\n\t\t\t\ttext-align:center;\n\t\t\t\tcolor:#b5b0b9;\n\t\t\t}\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/components/add-song"}]}