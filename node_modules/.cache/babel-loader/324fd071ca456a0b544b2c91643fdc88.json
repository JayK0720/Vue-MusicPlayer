{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/slider/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/slider/index.vue","mtime":1570290342690},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addClass } from '@/common/js/dom.js';\nimport BScroll from 'better-scroll';\nexport default {\n  name: 'slider',\n  data: function data() {\n    return {\n      dots: [],\n      currentIndex: 0,\n      count: 0\n    };\n  },\n  props: {\n    autoplay: {\n      type: Boolean,\n      default: true\n    },\n    loop: {\n      type: Boolean,\n      default: true\n    },\n    interval: {\n      type: Number,\n      default: 3000\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this._setSliderWidth();\n\n      _this._initDots();\n\n      _this._initSlider();\n\n      if (_this.autoplay) {\n        _this._autoPlay();\n      }\n    }); // window.resize\n\n    window.addEventListener('resize', function () {\n      _this._setSliderWidth(true);\n    }, false);\n  },\n  methods: {\n    _setSliderWidth: function _setSliderWidth(isResize) {\n      this.sliderWidth = this.$refs.slider.offsetWidth; // parentNode.children是一个只读属性，返回一个node的子elements,是一个动态更新的htmlcollection.\n\n      this.children = this.$refs.sliderGroup.children;\n      var width = 0;\n\n      for (var i = 0, len = this.children.length; i < len; i++) {\n        var child = this.children[i];\n        addClass(child, 'slider-item'); // 如果使用的时候没有添加'slider-item'类名，在slider组件里需要自动添加上\n\n        child.style.width = this.sliderWidth + 'px';\n        width += this.sliderWidth;\n      }\n\n      this.count = this.children.length;\n\n      if (this.loop && !isResize) {\n        width += this.sliderWidth * 2;\n      }\n\n      this.$refs.sliderGroup.style.width = width + 'px';\n    },\n    _initSlider: function _initSlider() {\n      var _this2 = this;\n\n      this.scroll = new BScroll(this.$refs.slider, {\n        scrollX: true,\n        scrollY: false,\n        probeType: 1,\n        snap: {\n          loop: this.loop,\n          threshold: 0.3,\n          speed: 400\n        },\n        click: true,\n        momentum: false\n      });\n      this.scroll.on('scrollEnd', function () {\n        var pageIndex = _this2.scroll.getCurrentPage().pageX;\n\n        _this2.currentIndex = pageIndex;\n\n        if (_this2.autoplay) {\n          clearTimeout(_this2.timer);\n\n          _this2._autoPlay();\n        }\n      });\n    },\n    _autoPlay: function _autoPlay() {\n      var _this3 = this;\n\n      var pageIndex = this.currentIndex + 1;\n      if (pageIndex >= this.count) pageIndex = 0;\n      this.timer = setTimeout(function () {\n        _this3.scroll.goToPage(pageIndex, 0, 400);\n      }, this.interval);\n    },\n    _initDots: function _initDots() {\n      this.dots = new Array(this.children.length);\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"slider\" ref='slider'>\n\t\t<div class=\"slider-group\" ref='sliderGroup'>\n\t\t\t<slot></slot>\n\t\t</div>\n\t\t<div class=\"dots\" >\n\t\t\t<span \n\t\t\t\tv-for='(item,index) in dots' \n\t\t\t\t:key='index'\n\t\t\t\t:class='{active:index === currentIndex}'\n\t\t\t></span>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {addClass} from '@/common/js/dom.js'\n\timport BScroll from 'better-scroll'\n\texport default{\n\t\tname:'slider',\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdots:[],\n\t\t\t\tcurrentIndex:0,\n\t\t\t\tcount:0,\n\t\t\t}\n\t\t},\n\t\tprops:{\n\t\t\tautoplay:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:true\n\t\t\t},\n\t\t\tloop:{\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:true\n\t\t\t},\n\t\t\tinterval:{\n\t\t\t\ttype:Number,\n\t\t\t\tdefault:3000\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis._setSliderWidth();\n\t\t\t\tthis._initDots();\n\t\t\t\tthis._initSlider();\n\t\t\t\tif(this.autoplay){\n\t\t\t\t\tthis._autoPlay();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// window.resize\n\t\t\twindow.addEventListener('resize',() => {\n\t\t\t\tthis._setSliderWidth(true);\n\t\t\t},false); \n\t\t},\n\t\tmethods:{\n\t\t\t_setSliderWidth(isResize){\n\t\t\t\tthis.sliderWidth = this.$refs.slider.offsetWidth;\n\t\t\t\t// parentNode.children是一个只读属性，返回一个node的子elements,是一个动态更新的htmlcollection.\n\t\t\t\tthis.children = this.$refs.sliderGroup.children;\n\t\t\t\tlet width = 0;  \n\t\t\t\tfor(let i = 0, len = this.children.length; i < len; i++){\n\t\t\t\t\tlet child = this.children[i];\n\t\t\t\t\taddClass(child,'slider-item');\t// 如果使用的时候没有添加'slider-item'类名，在slider组件里需要自动添加上\n\t\t\t\t\tchild.style.width = this.sliderWidth + 'px';\n\t\t\t\t\twidth += this.sliderWidth;\t\n\t\t\t\t}\n\t\t\t\tthis.count = this.children.length;\n\t\t\t\tif(this.loop && !isResize){\n\t\t\t\t\twidth += this.sliderWidth * 2;\n\t\t\t\t}\n\t\t\t\tthis.$refs.sliderGroup.style.width = width + 'px';\n\t\t\t},\n\t\t\t_initSlider(){\n\t\t\t\tthis.scroll = new BScroll(this.$refs.slider,{\n\t\t\t\t\tscrollX:true,\n\t\t\t\t\tscrollY:false,\n\t\t\t\t\tprobeType:1,\n\t\t\t\t\tsnap:{\n\t\t\t\t\t\tloop:this.loop,\n\t\t\t\t\t\tthreshold:0.3,\n\t\t\t\t\t\tspeed:400\n\t\t\t\t\t},\n\t\t\t\t\tclick:true,\n\t\t\t\t\tmomentum:false,\n\t\t\t\t});\n\t\t\t\tthis.scroll.on('scrollEnd',() => {\n\t\t\t\t\tlet pageIndex = this.scroll.getCurrentPage().pageX;\n\t\t\t\t\tthis.currentIndex = pageIndex;\n\t\t\t\t\tif(this.autoplay){\n\t\t\t\t\t\tclearTimeout(this.timer);\n\t\t\t\t\t\tthis._autoPlay();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t_autoPlay(){\n\t\t\t\tlet pageIndex = this.currentIndex + 1;\n\t\t\t\tif(pageIndex >= this.count) pageIndex = 0;\n\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\tthis.scroll.goToPage(pageIndex,0,400);\n\t\t\t\t},this.interval);\n\t\t\t},\n\t\t\t_initDots(){\n\t\t\t\tthis.dots = new Array(this.children.length);\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang='scss' scoped>\n\t.slider{\n\t\tposition:relative;\n\t\twidth:100%;\n\t\toverflow:hidden;\n\t\t.slider-item{\n\t\t\tfloat:left;\n\t\t\ta{\n\t\t\t\tdisplay:block;\n\t\t\t\theight:100%;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t\timg{\n\t\t\t\tdisplay:block;\n\t\t\t\theight:auto;\n\t\t\t\twidth:100%;\n\t\t\t}\n\t\t}\n\t\t.dots{\n\t\t\twidth:100%;\n\t\t\tposition:absolute;\n\t\t\tbottom:10px;\n\t\t\theight:8px;\n\t\t\tfont-size:0;\n\t\t\ttext-align:center;\n\t\t\tz-index:10;\n\t\t\tspan{\n\t\t\t\tdisplay:inline-block;\n\t\t\t\tmargin:0 5px;\n\t\t\t\twidth:8px;\n\t\t\t\theight:8px;\n\t\t\t\tbackground-color:rgba(0,0,0,.3);\n\t\t\t\tborder-radius:50%;\n\t\t\t\t&.active{\n\t\t\t\t\tbackground-color:#fff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/base/slider"}]}