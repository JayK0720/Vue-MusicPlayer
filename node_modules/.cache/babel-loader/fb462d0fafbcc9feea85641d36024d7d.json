{"remainingRequest":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/progress-bar/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/src/base/progress-bar/index.vue","mtime":1571841127447},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinkang/Desktop/Vue-MusicPlayer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar barWidth = 12;\nimport { prefixStyle } from '@/common/js/dom';\nvar transform = prefixStyle('transform');\nexport default {\n  name: 'progress-bar',\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    }\n  },\n  created: function created() {\n    this.touch = {};\n  },\n  methods: {\n    /*\n    1. 拖动开始的时候先初始化, 圆点的初始位置，以及此时歌曲播放的进度 \n    2. 拖动过程中实时获取拖动的数据, 减去初始的x坐标，再加上进度条的宽度，即为此时歌曲的播放进度\n    */\n    handleTouchStart: function handleTouchStart(e) {\n      this.touch.startX = e.touches[0].pageX;\n      this.touch.progressWidth = this.$refs.progress.offsetWidth;\n      this.touch.initial = true;\n    },\n    handleTouchMove: function handleTouchMove(e) {\n      if (!this.touch.initial) return;\n      var delta = e.touches[0].pageX - this.touch.startX;\n      /*offsetWidth的最大宽度不能超过一个定值,同样,最小值不能小于0*/\n\n      var offsetWidth = Math.min(this.$refs.slider.offsetWidth - barWidth / 2, Math.max(0, this.touch.progressWidth + delta));\n\n      this._setProgress(offsetWidth);\n    },\n    handleTouchEnd: function handleTouchEnd(e) {\n      this.touch.initial = false;\n      /*const totalWidth = this.$refs.slider.offsetWidth - barWidth; \n      const percent = this.$refs.progress.offsetWidth / totalWidth;\n      this.$emit('percentChange',percent); */\n\n      this._triggerPercent();\n    },\n    _setProgress: function _setProgress(offsetWidth) {\n      this.$refs.progress.style.width = \"\".concat(offsetWidth, \"px\");\n      this.$refs.bar.style.transform = \"translate3d(\".concat(offsetWidth, \"px,0,0)\");\n    },\n    handleChangeProgress: function handleChangeProgress(e) {\n      var offsetWidth = e.offsetX - barWidth / 2;\n\n      this._setProgress(offsetWidth);\n\n      this._triggerPercent();\n    },\n    _triggerPercent: function _triggerPercent() {\n      var totalWidth = this.$refs.slider.offsetWidth - barWidth;\n      var percent = this.$refs.progress.offsetWidth / totalWidth;\n      this.$emit('percentChange', percent);\n    }\n  },\n  watch: {\n    percent: function percent(value) {\n      // 在拖动的过程中,歌曲一直在播放，此时也会设置 进度条的宽度 和 bar的位置\n      if (this.touch.initial) return;\n      var sliderWidth = this.$refs.slider.offsetWidth - barWidth;\n      var offsetWidth = sliderWidth * value;\n\n      this._setProgress(offsetWidth);\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA,IAAA,QAAA,GAAA,EAAA;AACA,SAAA,WAAA,QAAA,iBAAA;AACA,IAAA,SAAA,GAAA,WAAA,CAAA,WAAA,CAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,OARA,qBAQA;AACA,SAAA,KAAA,GAAA,EAAA;AACA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA;;;;AAIA,IAAA,gBALA,4BAKA,CALA,EAKA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,EAAA,KAAA;AACA,WAAA,KAAA,CAAA,aAAA,GAAA,KAAA,KAAA,CAAA,QAAA,CAAA,WAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AACA,KATA;AAUA,IAAA,eAVA,2BAUA,CAVA,EAUA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,EAAA,KAAA,GAAA,KAAA,KAAA,CAAA,MAAA;AACA;;AACA,UAAA,WAAA,GAAA,IAAA,CAAA,GAAA,CAAA,KAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,QAAA,GAAA,CAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,aAAA,GAAA,KAAA,CAAA,CAAA;;AACA,WAAA,YAAA,CAAA,WAAA;AACA,KAhBA;AAiBA,IAAA,cAjBA,0BAiBA,CAjBA,EAiBA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA;;;;AAGA,WAAA,eAAA;AACA,KAvBA;AAwBA,IAAA,YAxBA,wBAwBA,WAxBA,EAwBA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,aAAA,WAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,KAAA,CAAA,SAAA,yBAAA,WAAA;AACA,KA3BA;AA4BA,IAAA,oBA5BA,gCA4BA,CA5BA,EA4BA;AACA,UAAA,WAAA,GAAA,CAAA,CAAA,OAAA,GAAA,QAAA,GAAA,CAAA;;AACA,WAAA,YAAA,CAAA,WAAA;;AACA,WAAA,eAAA;AACA,KAhCA;AAiCA,IAAA,eAjCA,6BAiCA;AACA,UAAA,UAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,QAAA;AACA,UAAA,OAAA,GAAA,KAAA,KAAA,CAAA,QAAA,CAAA,WAAA,GAAA,UAAA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,OAAA;AACA;AArCA,GAXA;AAkDA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,KADA,EACA;AACA;AACA,UAAA,KAAA,KAAA,CAAA,OAAA,EAAA;AACA,UAAA,WAAA,GAAA,KAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,QAAA;AACA,UAAA,WAAA,GAAA,WAAA,GAAA,KAAA;;AACA,WAAA,YAAA,CAAA,WAAA;AACA;AAPA;AAlDA,CAAA","sourcesContent":["<template>\n\t<div class=\"progress-slider\" ref='slider' @click='handleChangeProgress'>\n\t\t<div class=\"progress\" ref='progress'></div>\n\t\t<div \n\t\t\tclass=\"slider-bar\" \n\t\t\tref='bar'\n\t\t\t@touchstart.prevent='handleTouchStart'\n\t\t\t@touchmove.prevent='handleTouchMove'\n\t\t\t@touchend.prevent='handleTouchEnd'\n\t\t></div>\n\t</div>\n</template>\n\n<script>\n\tconst barWidth = 12;\n\timport {prefixStyle} from '@/common/js/dom'\n\tconst transform = prefixStyle('transform');\n\texport default{\n\t\tname:'progress-bar',\n\t\tprops:{\n\t\t\tpercent:{\n\t\t\t\ttype:Number,\n\t\t\t\tdefault:0\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.touch = {}\n\t\t},\n\t\tmethods:{\n\t\t\t/*\n\t\t\t1. 拖动开始的时候先初始化, 圆点的初始位置，以及此时歌曲播放的进度 \n\t\t\t2. 拖动过程中实时获取拖动的数据, 减去初始的x坐标，再加上进度条的宽度，即为此时歌曲的播放进度\n\t\t\t*/\n\t\t\thandleTouchStart(e){\n\t\t\t\tthis.touch.startX = e.touches[0].pageX;\n\t\t\t\tthis.touch.progressWidth = this.$refs.progress.offsetWidth;\n\t\t\t\tthis.touch.initial = true;\n\t\t\t},\n\t\t\thandleTouchMove(e){\n\t\t\t\tif(!this.touch.initial) return;\n\t\t\t\tconst delta = e.touches[0].pageX - this.touch.startX;\n\t\t\t\t/*offsetWidth的最大宽度不能超过一个定值,同样,最小值不能小于0*/\n\t\t\t\tconst offsetWidth = Math.min( this.$refs.slider.offsetWidth - barWidth/2 , Math.max(0,this.touch.progressWidth+delta) );\n\t\t\t\tthis._setProgress(offsetWidth);\n\t\t\t},\n\t\t\thandleTouchEnd(e){\n\t\t\t\tthis.touch.initial = false;\n\t\t\t\t/*const totalWidth = this.$refs.slider.offsetWidth - barWidth; \n\t\t\t\tconst percent = this.$refs.progress.offsetWidth / totalWidth;\n\t\t\t\tthis.$emit('percentChange',percent); */\n\t\t\t\tthis._triggerPercent();\n\t\t\t},\n\t\t\t_setProgress(offsetWidth){\n\t\t\t\tthis.$refs.progress.style.width = `${offsetWidth}px`;\n\t\t\t\tthis.$refs.bar.style.transform = `translate3d(${offsetWidth}px,0,0)`;\n\t\t\t},\n\t\t\thandleChangeProgress(e){\n\t\t\t\tconst offsetWidth = e.offsetX - barWidth/2;\n\t\t\t\tthis._setProgress(offsetWidth);\n\t\t\t\tthis._triggerPercent()\n\t\t\t},\n\t\t\t_triggerPercent(){\n\t\t\t\tconst totalWidth = this.$refs.slider.offsetWidth - barWidth;\n\t\t\t\tconst percent = this.$refs.progress.offsetWidth / totalWidth;\n\t\t\t\tthis.$emit('percentChange',percent);\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tpercent(value) {\n\t\t\t\t// 在拖动的过程中,歌曲一直在播放，此时也会设置 进度条的宽度 和 bar的位置\n\t\t\t\tif(this.touch.initial) return;\n\t\t\t\tconst sliderWidth = this.$refs.slider.offsetWidth - barWidth;\n\t\t\t\tlet offsetWidth = sliderWidth * value;\n\t\t\t\tthis._setProgress(offsetWidth);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang='scss'>\n\t.progress-slider{\n\t\tposition:relative;\n\t\twidth:100%;\n\t\theight:100%;\n\t\tbackground-color:#fff;\n\t}\n\t.progress{\n\t\twidth:0;\n\t\theight:100%;\n\t\tbackground-color:#2ed296;\n\t}\n\t.slider-bar{\n\t\tposition:absolute;\n\t\tleft:0;\n\t\ttop:-5px;\n\t\twidth:12px;\n\t\theight:12px;\n\t\tborder-radius:50%;\n\t\tbackground-color:#fff;\n\t}\n</style>\n"],"sourceRoot":"src/base/progress-bar"}]}